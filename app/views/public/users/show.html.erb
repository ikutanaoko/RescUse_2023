<div class="row">
  <div class="col-5">
    <div class="mypage_content">
      <h5 class="font-weight-bold">新着通知</h5>
      <%= render 'notification', notifications:@notifications %>
    </div>
    <div class="mypage_content">
      <h5 class="font-weight-bold">ランキング</h5>
      <div class="container" style="width:100%">
        <canvas id="canvas"></canvas>
      </div>
    </div>
  </div>
  <div class="col-7">
    <div class="row mx-2 text-center">
      <div class="col-4 mx-0 mypage_content">
        <h5 class="font-weight-bold"><%= link_to "投稿履歴", users_products_index_path %></h5>
      </div>
      <div class="col-4 mx-0 mypage_content">
        <h5 class="font-weight-bold"><%= link_to "引取履歴", index_path %></h5>
      </div>
      <div  class="col-4 mx-0 mypage_content">
        <h5 class="font-weight-bold"><%=link_to favorites_path do %>保存済み<span class="text-warning text-opacity-50">★</span><% end %></h5>
      </div>
    </div>

    <div class="mypage_content">
      <h5 class="font-weight-bold">新着の未開封引取募集備品</h5>
      <%= render 'product', products:@new_products %>
      <div class="text-right">
        <%= link_to "もっと見る...", new_products_path %>
      </div>
    </div>
    <div class="mypage_content">
      <h5 class="font-weight-bold">新着の開封済引取募集備品</h5>
      <%= render 'product', products:@used_products %>
      <div class="text-right">
        <%= link_to "もっと見る...", used_products_path %>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


  
  <script data-turbolinks-eval="false">
window.onload = function() {
    ctx = document.getElementById("canvas").getContext("2d");
    window.myBar = new Chart(ctx, {
        type: 'bar', // ここは bar にする必要があります
        data: barChartData,
        options: complexChartOption
    });
};
</script>
<script>
// <%= @departments.map(&:name).to_json %>　部署の名前を取得する
var barChartData = {
    labels: ['8/26','8/27','8/28','8/29','8/30','8/31','9/1',
        '9/2','9/3','9/4','9/5','9/6','9/7','9/8',
        '9/9','9/10','9/11','9/12','9/13','9/14',
        '9/15','9/16','9/17','9/18','9/19','9/20','9/21','9/22'
    ],
    datasets: [
    {
        label: 'acctive-score',
        data: ['0.155','0.118','0.121','0.068','0.083','0.060','0.067',
            '0.121','0.121','0.150','0.118','0.097','0.078','0.127',
            '0.155','0.140','0.101','0.140','0.041','0.093','0.189',
            '0.146','0.134','0.127','0.116','0.111','0.125','0.116'
        ],
        borderColor : "rgba(254,97,132,0.8)",
        backgroundColor : "rgba(254,97,132,0.5)",
    },
    {
        label: 'passive-score',
        data: ['0.3','0.1','0.1','0.3','0.4','0.2','0.0',
            '0.2','0.3','0.11','0.5','0.2','0.5','0.4',
            '0.0','0.3','0.7','0.3','0.6','0.4','0.9',
            '0.7','0.4','0.8','0.7','0.4','0.7','0.8'
        ],
        borderColor : "rgba(54,164,235,0.8)",
        backgroundColor : "rgba(54,164,235,0.5)",
    },
    ],
};
</script>

<script>
var complexChartOption = {
    responsive: true,
};
</script>
